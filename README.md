# java-shareit
ShareIt — реализация запросов вещей, переход на микросервисную архитектуру и покрытие тестами (спринт 3)
На этом этапе проекта я завершила реализацию всей ключевой функциональности ShareIt: пользователи теперь могут не только бронировать вещи, но и создавать запросы на нужные им предметы, а другие участники — откликаться на них. Кроме того, я выполнила архитектурное разделение проекта на два микросервиса — shareIt-server и shareIt-gateway, а также покрыла весь проект тестами, включая REST, логику и сериализацию.

Цели спринта
Реализовать функциональность ItemRequest (запросы на вещи);

Обеспечить возможность добавления вещей в ответ на запросы;

Разделить проект на два модуля (gateway/server) в рамках микросервисной архитектуры;

Вынести валидацию в gateway и реализовать обмен между сервисами через REST;

Покрыть проект юнит-тестами, интеграционными тестами и MockMVC.

Что я сделала
1. Функциональность запросов на вещи
Перешла в ветку add-item-requests-and-gateway;

Создала сущность ItemRequest, DTO ItemRequestDto, мапперы;

Реализовала ItemRequestController и основные эндпоинты:

POST /requests — создание запроса;

GET /requests — список своих запросов с привязанными ответами;

GET /requests/all — список запросов других пользователей;

GET /requests/{requestId} — запрос по id с ответами;

В каждом ответе выводятся: id, описание запроса, дата и список подходящих предметов;

Обеспечила сортировку по дате создания в порядке убывания;

Добавила возможность указать requestId при создании вещи через POST /items, чтобы связать вещь с запросом.

2. Разделение проекта на микросервисы
Преобразовала проект в многомодульный Maven-проект:

shareIt-server — основная логика (работа с БД, сервисы, репозитории);

shareIt-gateway — входная точка для пользователей (валидация и проксирование);

Настроила pom.xml в корневом каталоге и для каждого модуля;

Задала разные порты: 8080 для gateway и 9090 для server;

Перенесла контроллеры и валидацию (аннотации + кастомные @Valid) в shareIt-gateway;

Реализовала REST-взаимодействие между gateway и server:

Использовала RestTemplate;

Расширила и настроила BaseClient;

Создала ItemRequestClient, ItemClient, UserClient, BookingClient;

Обновила BookingController и аналогичные контроллеры в gateway.

3. Валидация на уровне gateway
Вынесла всю валидацию, не требующую обращения к БД, в shareIt-gateway;

Для нестандартных проверок реализовала @Validated и кастомные исключения;

Создала глобальный обработчик ошибок (ErrorHandler) с нужными кодами HTTP:

400 — при ошибках валидации;

404 — при отсутствии сущностей;

500 — при внутренних сбоях.

4. Тестирование
Покрыла функциональность трёх типов тестов:

Интеграционные тесты (shareIt-server)
Написала тесты для сервисов ItemServiceImpl, BookingServiceImpl, ItemRequestServiceImpl;

Использовала встроенную H2 БД и аннотации @DataJpaTest, @SpringBootTest;

Проверила корректную работу бизнес-логики, взаимодействие с репозиториями, фильтрацию, сортировку и проверку прав доступа.

REST-тесты (shareIt-gateway)
Использовала MockMvc для тестирования всех контроллеров;

Смокала сервисы через @MockBean;

Протестировала:

правильные и неправильные входные данные;

валидационные ошибки;

корректные маршруты REST;

поведение при отсутствии данных.

JSON-тесты DTO
С помощью @JsonTest протестировала сериализацию и десериализацию:

DTO с форматированием дат;

DTO с аннотациями @NotNull, @Size, @Future и др.;

Обеспечила читаемость и стабильность обмена данными между слоями.

Технологии
Spring Boot

Spring Data JPA + Hibernate

PostgreSQL + H2

Maven multi-module

REST + RestTemplate

JUnit 5 + Mockito + MockMVC + @JsonTest

Lombok

Bean Validation (javax.validation)

Архитектурные решения
Разделила проект на gateway и server для улучшения масштабируемости;

Сконцентрировала бизнес-логику в server, а работу с пользователем — в gateway;

Реализовала строгую валидацию и централизованную обработку ошибок;

Использовала модульное построение по функциональным блокам (item, booking, request, user);

Обеспечила соответствие REST-спецификации и чистую декомпозицию слоёв.

Результат
По итогам спринта приложение ShareIt:

поддерживает полный цикл обмена вещами (от поиска до отзыва);

реализует логику запросов вещей и ответов на них;

переведено на микросервисную архитектуру;

обладает надёжной системой валидации и устойчиво к ошибкам;

покрыто всесторонними тестами, что обеспечивает высокую стабильность и готовность к дальнейшему развитию.

Проект завершён в рамках всех требований и готов к демонстрации.
